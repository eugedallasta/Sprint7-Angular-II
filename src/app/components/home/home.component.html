<div class="container row d-flex justify-content-center p-4">
  <div class="w-50 col-6 m-3">
    <p class="mb-1">¿Qué servicios deseas contratar?</p>

    <span class="fs-6 text-muted fw-lighter">(Selecciona 1 o más servicios)</span>

    <form
      novalidate
      (ngSubmit)="addPost(formulario.value)"
      [formGroup]="formulario"
      class="mt-3"
    >
      <div class="form-check mb-5">
        <input
          class="form-check-input"
          type="checkbox"
          value="Página Web"
          (change)="onCheckChange($event)"
        />
        <label class="form-check-label" for="web">
          Una página web (500€)
        </label>
      </div>

      <app-panel *ngIf="panell"></app-panel>

      <div class="form-check mb-3">
        <input
          class="form-check-input"
          type="checkbox"
          value="Consultoria SEO"
          (change)="onCheckChange($event)"
        />
        <label class="form-check-label" for="seo">
          Una consultoría SEO (300€)
        </label>
      </div>

      <div class="form-check mb-3">
        <input
          class="form-check-input"
          type="checkbox"
          value="Campaña de Google Ads"
          (change)="onCheckChange($event)"
        />
        <label class="form-check-label" for="campanya">
          Una campaña de Google Ads (200€)
        </label>
      </div>

      <!-- Nombre del Cliente -->

      <div class="m-4 w-md-50">
        <label class="form-label mb-3" for="nombre">
          Nombre Cliente
          <span class="fs-6 text-muted fw-lighter"
            >(de 2 a 30 caracteres)</span
          >
        </label>
        <input
          class="form-control"
          type="text"
          placeholder="Introduce el nombre del Cliente"
          id="nombre"
          formControlName="nombre"
          [class.special]="nombre?.touched && nombre?.invalid"
          required
        />

        <!-- Mensajes de error -->

        <div
          *ngIf="nombre?.invalid && (nombre?.dirty || nombre?.touched)"
          class="error m-3"
        >
          <div *ngIf="nombre?.errors?.['required']" class="error">
            El nombre del Cliente es obligatorio para guardar el Presupuesto.
          </div>
          <div *ngIf="nombre?.errors?.['minlength']">
            El nombre debe contener un mínimo de 2 caracteres.
          </div>
          <div *ngIf="nombre?.errors?.['maxlength']">
            El nombre puede contener un máximo de 30 caracteres.
          </div>
        </div>
      </div>

      <!-- Nombre del Presupuesto -->

      <div class="m-4 w-md-50">
        <label class="form-label mb-3" for="nombrePresupuesto">
          Nombre Presupuesto
          <span class="fs-6 text-muted fw-lighter"
            >(de 2 a 20 caracteres)</span
          >
        </label>
        <input
          class="form-control"
          type="text"
          placeholder="Asigna nombre al presupuesto"
          id="nombrePresupuesto"
          formControlName="nombrePresupuesto"
          [class.special]="nombrePresupuesto?.touched && nombrePresupuesto?.invalid"
          required
        />

        <!-- Mensajes de error -->

        <div
          *ngIf="
            nombrePresupuesto?.invalid &&
            (nombrePresupuesto?.dirty || nombrePresupuesto?.touched)
          "
          class="error m-3"
        >
          <div *ngIf="nombrePresupuesto?.errors?.['required']" class="error">
            El NOMBRE del Presupuesto es obligatorio para guardar el
            Presupuesto.
          </div>
          <div *ngIf="nombrePresupuesto?.errors?.['minlength']">
            El nombre debe contener un mínimo de 2 caracteres.
          </div>
          <div *ngIf="nombrePresupuesto?.errors?.['maxlength']">
            El nombre puede contener un máximo de 20 caracteres.
          </div>
        </div>
      </div>
      <div>
        Precio:
        <p class="d-inline-block mt-3 mb-3">{{ total }}€</p>
      </div>
      <div class="d-grid gap-2 d-md-block">
        <button
          type="submit"
          [disabled]="formulario.invalid"
          class="btn btn-dark m-3"
        >
          Guardar Presupuesto
        </button>
        <button
          type="reset"
          class="btn btn-dark"
          (click)="clear()"
        >
          Borrar
        </button>
      </div>
    </form>
  </div>

  <!-- Lista de presupuestos -->

  <app-list *ngIf="presupuestos.length > 0" class="col-5 m-3"></app-list>
</div>
